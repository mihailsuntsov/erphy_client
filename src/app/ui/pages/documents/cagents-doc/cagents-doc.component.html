<mat-drawer-container [ngClass]="{doc_container: mode=='standart',doc_container_window_mode: mode=='window'}" autosize *transloco="let t">
    <mat-drawer #drawer class="categories-sidenav" mode="side" opened>
        <div class="category-toolbar-icons flex">
            <span style="flex-grow: 1;"></span>
                <div>
                        <button mat-icon-button (click)="expandAllCheckedNodes(); categoriesExpanded=true;"  
                        matTooltip="{{t('docs.tip.sh_cat_p')}}" color="primary">
                            <mat-icon>visibility</mat-icon>
                        </button>
                        <button mat-icon-button (click)="collapseAllNodes(); categoriesExpanded=false;" 
                            matTooltip="{{t('docs.tip.collaps_cat')}}" color="primary">
                                <mat-icon>visibility_off</mat-icon>
                        </button>
                        <button mat-icon-button 
                            [disabled]="!(+selectedCagentCategory.selectedNodeId>0)"
                            (click)="
                            addCheckbox(selectedCagentCategory.selectedNodeId);
                            selectCheckboxesOfAllParents(getNodeById(selectedCagentCategory.selectedNodeId)); 
                            categoriesExpanded=false;" 
                            matTooltip="{{t('docs.tip.p_selct_all_c')}}" color="primary">
                                <mat-icon>publish</mat-icon>
                        </button>
                </div>
            <span style="flex-grow: 1;"></span>
        </div>
        <mat-divider></mat-divider>
        <mat-tree [dataSource]="treeDataSource" [treeControl]="treeControl">
            <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
                <button mat-icon-button disabled></button>
                <mat-checkbox style="margin-right:8px;"
                    (click)="$event.stopPropagation()"
                    (change)="$event ? clickTableCheckbox(node.id) : null"
                    [checked]="isSelectedCheckbox(node.id)"
                    [disabled]=!editability
                    >
                </mat-checkbox>
                <span class="node" [ngClass]="{selected_node:node.id==selectedCagentCategory.selectedNodeId}" (click)="selectNode(node)">{{node.name}}</span>
            </mat-tree-node>
            <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
                <button mat-icon-button matTreeNodeToggle
                        [attr.aria-label]="'toggle ' + node.name">
                <mat-icon class="mat-icon-rtl-mirror">
                    {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                </mat-icon>
                </button>
                <mat-checkbox style="margin-right:8px;"
                    (click)="$event.stopPropagation()"
                    (change)="$event ? clickTableCheckbox(node.id) : null"
                    [checked]="isSelectedCheckbox(node.id)"
                    [disabled]=!editability
                    >
                </mat-checkbox>
                <span class="node" [ngClass]="{selected_node:node.id==selectedCagentCategory.selectedNodeId}" (click)="selectNode(node)">{{node.name}}</span>
            </mat-tree-node>
        </mat-tree>
    </mat-drawer>

    <div class="categories-sidenav-content">
        <form [formGroup]="formBaseInformation" style="width:100%">
            <mat-card appearance="outlined" class="card for-sticky-header">
                <mat-card-header>
                    <mat-card-title class="top-bar container-fluid"> 
                        <div class="row" id="topBlock">
                            <div id="cardname">
                                {{t('docs.docs.cparty')}}
                            </div>
                            <div  id="status" style=" font-size: 15px;"> 
                                <div class = "circle-in-selected" *ngIf="+formBaseInformation.get('status_id').value>0" [style.background-color]="status_color"></div>
                                <mat-form-field  class="mat-form-field-100" style="margin-top: -25px;">
                                    <mat-select     style="padding: 0px 0px 0px 23px" 
                                                    [disabled]=!editability
                                                    panelClass="statuseslist"
                                                    formControlName="status_id"
                                                    (selectionChange)="setStatusColor();">
                                        <mat-option *ngFor="let status of receivedStatusesList" 
                                                    [value]="status.id"
                                                    matTooltip={{status.description}}>
                                                    <div style="display: inline;line-height: 20px;">
                                                        <div class = "circle-wrapper">
                                                            <div class = "circle-in-list" [style.background-color]="status.color"></div>
                                                        </div>
                                                        <div class = "status-name">{{status.name}}</div>
                                                    </div>
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="separator"></div><!-- !!! -->
                            <button 
                                mat-raised-button 
                                [style.display]="allowToUpdate"
                                (click)="clickBtnUpdate()"
                                [style.display]="id>0?'flex':'none'"
                                [disabled]="!formBaseInformation.valid" 
                                matTooltip="{{t('docs.tip.save')}}"
                                color="primary"
                                class="button small-button">
                                <i class="material-icons">save</i>
                            </button>
                            <button 
                                mat-raised-button 
                                [style.display]="id>0?'none':'flex'"
                                (click)="clickBtnCreateNewDocument()" 
                                [disabled]="!formBaseInformation.valid" 
                                matTooltip="{{t('docs.tip.create')}}"
                                *ngIf="allowToCreate"
                                color="primary"
                                class="button small-button">
                                <i class="material-icons">done</i>
                            </button>
                            <a routerLink="../{{+id>0?'../':''}}cagents" style="text-decoration: none;" [style.display]="(mode=='standart')?'block':'none'" >
                                <button 
                                    mat-raised-button 
                                    color="accent"
                                    [matTooltip]="id>0?t('docs.tip.exit'):t('docs.tip.cancel')"
                                    class="button small-button">
                                    <i class="material-icons">close</i>
                                </button>
                            </a>
                            <button [style.display]="(mode=='window')?'block':'none'"
                            mat-raised-button
                            style="margin-left:10px"
                            class="button small-button"
                            matDialogClose 
                            color="accent">
                            <i class="material-icons">close</i>
                            </button>
                        </div>
                    </mat-card-title>
                </mat-card-header>
                <mat-card-content *ngIf="rightsDefined && 
                (
                    (!allowToView && +id>0) ||
                    (!allowToCreate && +id==0)
                )"> 
                    <mat-card appearance="outlined" class="internal-card">
                        <mat-card-content style="font-size: 20px;font-weight: bold;color: red;text-align: center;height: 100px;padding: 38px 0;">
                            {{t('docs.msg.no_perm')}}
                        </mat-card-content>
                    </mat-card>
                </mat-card-content>
                <!-- !!! -->
                <mat-card-content *ngIf="!rightsDefined || (rightsDefined && (( +id>0 && allowToView)||(+id==0 && allowToCreate)))">
                    <form  class="form-horizontal" id="formControl" method="post" action="" style="margin-bottom: 0px;">
                            <div class="form-group" style="display: none;">
                                <label class="control-label col-sm-2" for="SortColumn">SelectedNodeId</label>
                                <input [(ngModel)]="selectedCagentCategory.selectedNodeId" type="text" class="form-control" id="SelectedNodeId" name="SelectedNodeId" value="">
                            </div>
                            <div class="form-group" style="display: none;">
                                <label class="control-label col-sm-2" for="SortColumn">SelectedNodeName</label>
                                <input [(ngModel)]="selectedCagentCategory.selectedNodeName" type="text" class="form-control" id="SelectedNodeName" name="SelectedNodeName" value="">
                            </div>
                    </form>
                
                    <mat-tab-group>
                        <mat-tab label="{{t('docs.tab.info')}}">
                            <div class="container-fluid">
                                <div class="row" style="padding: 10px">
                                    <div class="col-lg-4 col-xl-4 col-md-12">    
                                        <mat-card appearance="outlined">
                                            <mat-card-header>
                                                <mat-card-title class="card-title">{{t('docs.card.base_info')}}</mat-card-title>
                                            </mat-card-header>
                                            <mat-card-content class="input-form">
                                                <mat-form-field style="display: none">
                                                    <input  matInput
                                                            placeholder="id"
                                                            formControlName="id"/>
                                                </mat-form-field>
                                                
                                                <mat-form-field [ngClass]="{invisible: +id>0}">
                                                    <mat-label>{{t('docs.field.company')}}</mat-label>
                                                    <mat-select 
                                                     formControlName="company_id"
                                                     (selectionChange)="loadTrees();refreshPermissions()">
                                                        <mat-option  *ngFor="let rt of receivedCompaniesList" [value]="rt.id">
                                                                {{rt.name}}
                                                        </mat-option> 
                                                    </mat-select>
                                                </mat-form-field>
                                                <mat-form-field class="mat-form-field-100" *ngIf="+id>0">
                                                    <mat-label>{{t('docs.field.company')}}</mat-label>
                                                    <input  matInput [readonly]="true"
                                                            [ngModel]="formAboutDocument.get('company').value" [ngModelOptions]="{standalone: true}"/>
                                                </mat-form-field>
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.name_short')}} <span *ngIf="formBaseInformation.get('name').value==''||formBaseInformation.get('name').value==null" class="star">*</span></mat-label>
                                                    <input   matInput
                                                            [readonly]=!editability
                                                            maxlength="500"
                                                            formControlName="name"/>
                                                    <mat-hint align="start" *ngIf="formBaseInformation.get('name').touched">
                                                        <i *ngIf="formBaseInformation.get('name').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                    </mat-hint>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('name').value.length>450">{{formBaseInformation.get('name').value.length}} / 500</mat-hint>
                                                </mat-form-field>
                                                <!-- <mat-form-field>
                                                    <mat-label>{{t('docs.field.form')}} <span *ngIf="+formBaseInformation.get('opf_id').value==0" class="star">*</span></mat-label>
                                                    <mat-select [disabled]=!editability
                                                                formControlName="opf_id" 
                                                                matTooltip="{{t('docs.field.form')}}"
                                                                (selectionChange)="setJurElementsVisible()">              
                                                        <mat-option *ngFor="let rt of receivedSpravSysOPF" [value]="rt.id" matTooltip={{rt.description}} >
                                                                {{rt.name}}
                                                        </mat-option> 
                                                    </mat-select>
                                                    <mat-hint align="start" *ngIf="formBaseInformation.get('opf_id').touched">
                                                        <i *ngIf="+formBaseInformation.get('opf_id').value==0" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                    </mat-hint>
                                                </mat-form-field> -->
                                                <!-- Type / Тип -->
                                                <div class="row">
                                                    <div class="col-lg-6  col-md-12">
                                                        <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.type')}}</mat-label>
                                                            <mat-select  
                                                                formControlName="type"
                                                                [disabled]=!editability
                                                            >                          
                                                                <mat-option 
                                                                    value="entity" 
                                                                >
                                                                        {{t('docs.list.entity')}}
                                                                </mat-option>                     
                                                                <mat-option 
                                                                    value="individual"
                                                                >
                                                                        {{t('docs.list.individual')}}
                                                                </mat-option>                                                 
                                                            </mat-select>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="col-lg-6  col-md-12">
                                                        <!-- Код -->
                                                        <!-- <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.code')}}</mat-label>
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.code')}}"
                                                                    [readonly]=!editability
                                                                    maxlength="30"
                                                                    formControlName="code"/>
                                                            <mat-hint align="end" *ngIf="formBaseInformation.get('code').value.length>20">{{formBaseInformation.get('code').value.length}} / 30</mat-hint>
                                                        </mat-form-field> -->
                                                        <mat-form-field class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.price_type')}}</mat-label>
                                                            <mat-select formControlName="price_type_id" 
                                                                        [disabled]=!editability>
                                                                <mat-option  *ngFor="let rdl of receivedPriceTypesList" 
                                                                [value]="rdl.id"
                                                                matTooltip='{{rdl.description}}'>
                                                                        {{rdl.name}}
                                                                </mat-option>
                                                            </mat-select>
                                                        </mat-form-field>                                                        
                                                    </div>
                                                </div>

                                                <div class="row" *ngIf="formBaseInformation.get('type').value=='individual'">
                                                    <div class="col-lg-6 col-md-12">
                                                        <mat-form-field class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.date_of_birth')}}</mat-label>
                                                            <input  matInput 
                                                                    [readonly]=!editability
                                                                    formControlName="date_of_birth"
                                                                    [ngClass]="{'is-invalid':formBaseInformation.get('date_of_birth').touched && formBaseInformation.get('date_of_birth').invalid}"
                                                                    [matDatepicker]="dp_date_of_birth"/>
                                                                    <mat-datepicker-toggle *ngIf="editability" matSuffix [for]="dp_date_of_birth"></mat-datepicker-toggle>
                                                            <mat-datepicker #dp_date_of_birth></mat-datepicker>
                                                            <mat-hint *ngIf="formBaseInformation.get('date_of_birth').touched && formBaseInformation.get('date_of_birth').invalid" class="invalid-feedback">
                                                                <i class="form-invalid">{{t('docs.error.date_format')}}</i>
                                                            </mat-hint>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="col-lg-6 col-md-12">
                                                        <mat-form-field class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.sex')}}</mat-label>
                                                            <mat-select formControlName="sex">
                                                                <option value="" selected></option>
                                                                <mat-option value="male">{{t('docs.list.man')}}</mat-option>
                                                                <mat-option value="female">{{t('docs.list.woman')}}</mat-option>  
                                                            </mat-select>                                              
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.description')}}</mat-label>
                                                    <textarea   matInput
                                                                placeholder="{{t('docs.field.description')}}"
                                                                [readonly]=!editability
                                                                maxlength="1000"
                                                                formControlName="description">
                                                    </textarea>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('description').value.length>500">{{formBaseInformation.get('description').value.length}} / 1000</mat-hint>
                                                </mat-form-field>
                                                <!-- Тип цены -->
                                                <!-- Дисконтная карта -->
                                                <!-- <mat-form-field>
                                                    <input   matInput
                                                            [readonly]=!editability
                                                            placeholder="{{t('docs.field.disc_card')}}"
                                                            maxlength="30"
                                                            formControlName="discount_card"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('discount_card').value.length>25">{{formBaseInformation.get('discount_card').value.length}} / 30</mat-hint>
                                                </mat-form-field> -->
                                            </mat-card-content>
                                        </mat-card>
                                        <mat-card appearance="outlined">
                                            <mat-card-header>
                                                <mat-card-title class="card-title">{{t('docs.card.base_data')}}</mat-card-title>
                                            </mat-card-header>
                                            <mat-card-content class="input-form">
                                                <!-- Полное наименование -->
                                                <mat-form-field  *ngIf="formBaseInformation.get('type').value=='entity'">
                                                    <mat-label>{{t('docs.field.name_full')}}</mat-label>
                                                    <textarea   matInput
                                                            placeholder="{{t('docs.field.name_full')}}"
                                                            [readonly]=!editability
                                                            maxlength="500"
                                                            formControlName="jr_jur_full_name">
                                                    </textarea>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_jur_full_name').value.length>400">{{formBaseInformation.get('jr_jur_full_name').value.length}} / 500</mat-hint>
                                                </mat-form-field>
                                                <!-- Фамилия -->
                                                <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual'">
                                                    <mat-label>{{t('docs.field.surname')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.surname')}}"
                                                            [readonly]=!editability
                                                            maxlength="120"
                                                            formControlName="jr_fio_family"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_fio_family').value.length>100">{{formBaseInformation.get('jr_fio_family').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                <!-- Имя -->
                                                <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual'">
                                                    <mat-label>{{t('docs.field.person_name')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.person_name')}}"
                                                            [readonly]=!editability
                                                            maxlength="120"
                                                            formControlName="jr_fio_name"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_fio_name').value.length>100">{{formBaseInformation.get('jr_fio_name').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                <!-- Отчество -->
                                                <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual' && +formBaseInformation.get('jr_country_id').value==1">
                                                    <mat-label>{{t('docs.field.middle_name')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.middle_name')}}"
                                                            maxlength="120"
                                                            [readonly]=!editability
                                                            formControlName="jr_fio_otchestvo"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_fio_otchestvo').value.length>100">{{formBaseInformation.get('jr_fio_otchestvo').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                <!-- Правовая форма -->
                                                <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual'">
                                                    <mat-label>{{t('docs.field.legal_form')}}</mat-label>
                                                    <input  matInput
                                                            placeholder="{{t('docs.field.legal_form')}}"
                                                            maxlength="240"
                                                            [readonly]=!editability
                                                            formControlName="legal_form"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('legal_form').value.length>200">{{formBaseInformation.get('legal_form').value.length}} / 240</mat-hint>
                                                </mat-form-field>
                                                <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual'">
                                                    <mat-label>{{t('docs.field.id_card')}}</mat-label>
                                                    <input  matInput
                                                            placeholder="{{t('docs.field.id_card')}}"
                                                            maxlength="1000"
                                                            [readonly]=!editability
                                                            formControlName="id_card"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('id_card').value.length>900">{{formBaseInformation.get('id_card').value.length}} / 1000</mat-hint>
                                                </mat-form-field>
                                                <!-- ИНН -->
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.'+tinName)}}</mat-label>
                                                    <input  matInput
                                                            maxlength="12"
                                                            placeholder="{{t('docs.field.'+tinName)}}"
                                                            [readonly]=!editability
                                                            formControlName="jr_inn"/>
                                                </mat-form-field>
                                                <!-- VAT -->
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.'+vatName)}}</mat-label>
                                                    <input  matInput
                                                            maxlength="100"
                                                            placeholder="{{t('docs.field.'+vatName)}}"
                                                            [readonly]=!editability
                                                            formControlName="jr_vat"/>
                                                </mat-form-field>
                                                <!-- КПП -->
                                                <mat-form-field *ngIf="formBaseInformation.get('type').value=='entity' && +formBaseInformation.get('jr_country_id').value==1">
                                                    <mat-label>{{t('docs.field.kpp')}}</mat-label>
                                                    <input  matInput
                                                            maxlength="9"
                                                            [readonly]=!editability
                                                            placeholder="{{t('docs.field.kpp')}}"
                                                            (keypress)="numberOnly($event)"
                                                            formControlName="jr_jur_kpp"/>
                                                </mat-form-field>
                                                <!-- ОГРН(ИП) / Registration number -->
                                                <mat-form-field *ngIf="viz_jr_jur">
                                                    <mat-label>{{t('docs.field.'+regNumberName)}}</mat-label>
                                                    <input  matInput
                                                            maxlength="13"
                                                            [readonly]=!editability
                                                            placeholder="{{t('docs.field.'+regNumberName)}}"
                                                            formControlName="jr_jur_ogrn"/>
                                                </mat-form-field>
                                                <!-- ОКПО -->
                                                <mat-form-field  *ngIf="formBaseInformation.get('type').value=='entity' && +formBaseInformation.get('jr_country_id').value==1">
                                                    <mat-label>{{t('docs.field.okpo')}}</mat-label>
                                                    <input  matInput
                                                            maxlength="10"
                                                            [readonly]=!editability
                                                            placeholder="{{t('docs.field.okpo')}}"
                                                            (keypress)="numberOnly($event)"
                                                            formControlName="jr_okpo"/>
                                                </mat-form-field>
                                                <!-- Номер свидетельства -->
                                                <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual' && +formBaseInformation.get('jr_country_id').value==1">
                                                    <mat-label>{{t('docs.field.reg_doc_num')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.reg_doc_num')}}"
                                                            [readonly]=!editability
                                                            maxlength="30"
                                                            formControlName="jr_ip_svid_num"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_ip_svid_num').value.length>25">{{formBaseInformation.get('jr_ip_svid_num').value.length}} / 30</mat-hint>
                                                </mat-form-field>
                                                <!-- Дата регистрации -->
                                                <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual' && +formBaseInformation.get('jr_country_id').value==1">
                                                    <mat-label>{{t('docs.field.reg_date')}}</mat-label>
                                                    <input  matInput 
                                                            placeholder="{{t('docs.field.reg_date')}}"
                                                            [readonly]=!editability
                                                            formControlName="jr_ip_reg_date"
                                                            [ngClass]="{'is-invalid':formBaseInformation.get('jr_ip_reg_date').touched && formBaseInformation.get('jr_ip_reg_date').invalid}"
                                                            [matDatepicker]="dp"/>
                                                            <mat-datepicker-toggle *ngIf="editability" matSuffix [for]="dp"></mat-datepicker-toggle>
                                                    <mat-datepicker #dp></mat-datepicker>
                                                    <mat-hint *ngIf="formBaseInformation.get('jr_ip_reg_date').touched && formBaseInformation.get('jr_ip_reg_date').invalid" class="invalid-feedback">
                                                        <i class="form-invalid">{{t('docs.error.date_format')}}</i>
                                                    </mat-hint>
                                                </mat-form-field>
                                            </mat-card-content>
                                        </mat-card>
                                    </div> 
                                    <div class="col-lg-4 col-xl-4 col-md-12">   
                                        <mat-card appearance="outlined">
                                            <div class="del-icon"  [style.display]="editability?'block':'none'">
                                                <mat-icon   (click)="copyfromAddressToJurAddress()" 
                                                            matTooltip="{{t('docs.tip.addr_copy_q')}}" 
                                                            class="nav-icon">content_copy
                                                </mat-icon>
                                            </div>
                                            <mat-card-header>
                                                <mat-card-title class="card-title">{{t('docs.card.legal_address')}}</mat-card-title>
                                            </mat-card-header>
                                            
                                            <mat-card-content class="input-form">
                                                <!-- Индекс -->
                                                <div class="row">
                                                    <div class="col-lg-6  col-md-12">
                                                        <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.zip_code')}}</mat-label>
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.zip_code')}}"
                                                                    [readonly]=!editability
                                                                    maxlength="40"
                                                                    formControlName="jr_zip_code"/>
                                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_zip_code').value.length>30">{{formBaseInformation.get('jr_zip_code').value.length}} / 40</mat-hint>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="col-lg-6  col-md-12">
                                                        <mat-form-field  style="display: none;" >
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.country')}}"
                                                                    [readonly]=!editability
                                                                    formControlName="jr_country_id"/>
                                                        </mat-form-field>
                                                        <mat-form-field style="width:100%">
                                                            <mat-label>{{t('docs.field.country')}}</mat-label>
                                                            <input matInput
                                                            type="text"
                                                            [readonly]=!editability
                                                            formControlName="jr_country" 
                                                            [matAutocomplete]="auto2" 
                                                            (input)="checkEmptyJrCountryField();"
                                                            (change)="checkEmptyJrCountryField();">
                                                            <mat-autocomplete #auto2="matAutocomplete">
                                                                <mat-option *ngFor="let option of filteredSpravSysJrCountries | async" [value]="option.name_ru">
                                                                    <div (click)="formBaseInformation.get('jr_country_id').setValue(option.id)">
                                                                        <span style="margin:10px;">{{option.name_ru}}</span>
                                                                    </div>
                                                                </mat-option>
                                                            </mat-autocomplete>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <!-- Регион -->
                                                <!-- <mat-form-field style="display: none">
                                                    <input  matInput
                                                            placeholder="jr_region_id"
                                                            [readonly]=!editability
                                                            formControlName="jr_region_id"/>
                                                </mat-form-field>
                                                <mat-form-field class="mat-form-field-100" > 
                                                    <input  matInput 
                                                    placeholder="{{t('docs.field.region')}}"
                                                    [matAutocomplete]="auto5" 
                                                    [formControl]="searchJrRegionCtrl"
                                                    [readonly]=!editability
                                                    (input)="canJrRegionAutocompleteQuery=true; checkEmptyJrRegionField();"
                                                    (change)="canJrRegionAutocompleteQuery=false; checkEmptyJrRegionField();">
                                                    <mat-autocomplete #auto5="matAutocomplete">
                                                    <ng-container *ngIf="!isJrRegionListLoading" style="width:320px;">
                                                        <mat-option style="padding:0px" *ngFor="let value of filteredJrRegions" [value]="value.name_ru">
                                                        <div (click)="onSelectJrRegion(value.id,value.country_id,value.country_name_ru)">
                                                            <span style="margin:10px;"><b>{{value.name_ru}}</b></span>
                                                        </div>
                                                        </mat-option>
                                                    </ng-container>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                                <mat-progress-bar *ngIf="isJrRegionListLoading" mode="indeterminate"></mat-progress-bar>
                                                 -->
                                                
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.region')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.region')}}"
                                                            [readonly]=!editability
                                                            maxlength="120"
                                                            formControlName="jr_region"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_region').value.length>100">{{formBaseInformation.get('jr_region').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                
                                                <!-- Город -->
                                                <!-- <mat-form-field style="display: none">
                                                    <input  matInput
                                                            placeholder="jr_city_id"
                                                            [readonly]=!editability
                                                            formControlName="jr_city_id"/>
                                                </mat-form-field>
                                                <mat-form-field class="mat-form-field-100" > 
                                                    <mat-label>{{t('docs.field.city_locality')}}</mat-label>
                                                    <input  matInput 
                                                    [matAutocomplete]="auto7" 
                                                    [formControl]="searchJrCityCtrl"
                                                    [readonly]=!editability
                                                    (input)="canJrCityAutocompleteQuery=true; checkEmptyJrCityField();"
                                                    (change)="canJrCityAutocompleteQuery=false; checkEmptyJrCityField();">
                                                    <mat-autocomplete #auto7="matAutocomplete">
                                                    <ng-container *ngIf="!isJrCityListLoading" style="width:320px;">
                                                        <mat-option style="padding:0px" *ngFor="let value of filteredJrCities" [value]="value.name_ru">
                                                        <div (click)="onSelectJrCity(value.id,value.area_ru,value.region_id,value.region_name_ru,value.country_id,value.country_name_ru)">
                                                            <span style="margin:10px;"><b>{{value.name_ru}}</b> <i> {{value.area_ru}}</i></span>
                                                        </div>
                                                        </mat-option>
                                                    </ng-container>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                                <mat-progress-bar *ngIf="isJrCityListLoading" mode="indeterminate"></mat-progress-bar> -->
                                                
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.city_locality')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.city_locality')}}"
                                                            [readonly]=!editability
                                                            maxlength="120"
                                                            formControlName="jr_city"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_city').value.length>100">{{formBaseInformation.get('jr_city').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                
                                                <!-- Улица -->
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.street')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.street')}}"
                                                            [readonly]=!editability
                                                            maxlength="120"
                                                            formControlName="jr_street"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_street').value.length>100">{{formBaseInformation.get('jr_street').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                <!-- Дом -->
                                                <div class="row">
                                                    <div class="col-lg-6  col-md-12">
                                                        <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.house')}}</mat-label>
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.house')}}"
                                                                    [readonly]=!editability
                                                                    maxlength="16"
                                                                    formControlName="jr_home"/>
                                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_home').value.length>12">{{formBaseInformation.get('jr_home').value.length}} / 16</mat-hint>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="col-lg-6  col-md-12">
                                                        <!-- Квартира -->
                                                        <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.room')}}</mat-label>
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.room')}}"
                                                                    [readonly]=!editability
                                                                    maxlength="8"
                                                                    formControlName="jr_flat"/>
                                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_flat').value.length>6">{{formBaseInformation.get('jr_flat').value.length}} / 8</mat-hint>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <!-- Дополнение к адресу -->
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.addr_addittnl')}}</mat-label>
                                                    <textarea   matInput
                                                            placeholder="{{t('docs.field.addr_addittnl')}}"
                                                            [readonly]=!editability
                                                            maxlength="240"
                                                            formControlName="jr_additional_address">
                                                    </textarea>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_additional_address').value.length>200">{{formBaseInformation.get('jr_additional_address').value.length}} / 240</mat-hint>
                                                </mat-form-field>
                                            </mat-card-content>
                                        </mat-card>
                                        <mat-card appearance="outlined">
                                            <div class="del-icon"  [style.display]="editability?'block':'none'">
                                                <mat-icon   (click)="copyfromJurAddressToAddress()" 
                                                            matTooltip="{{t('docs.tip.addr_copy_qj')}}" 
                                                            class="nav-icon">content_copy
                                                </mat-icon>
                                            </div>
                                            <mat-card-header>
                                                <mat-card-title class="card-title">{{t('docs.card.address')}}</mat-card-title>
                                            </mat-card-header>
                                            <mat-card-content class="input-form">
                                                <!-- <pre>
                                                    {{formBaseInformation.get('cagentsContactsTable').value | json}}
                                                    </pre> -->
                                                <!-- Индекс -->
                                                <div class="row">
                                                    <div class="col-lg-6  col-md-12">
                                                        <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.zip_code')}}</mat-label>
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.zip_code')}}"
                                                                    [readonly]=!editability
                                                                    maxlength="40"
                                                                    formControlName="zip_code"/>
                                                            <mat-hint align="end" *ngIf="formBaseInformation.get('zip_code').value.length>30">{{formBaseInformation.get('zip_code').value.length}} / 40</mat-hint>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="col-lg-6  col-md-12">
                                                        <!-- Страна -->
                                                        <mat-form-field  style="display: none;" >
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.country')}}"
                                                                    formControlName="country_id"/>
                                                        </mat-form-field>
                                                        <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.country')}}</mat-label>
                                                            <input matInput
                                                            type="text"
                                                            formControlName="country" 
                                                            [readonly]=!editability
                                                            [matAutocomplete]="auto1" 
                                                            (input)="checkEmptyCountryField();"
                                                            (change)="checkEmptyCountryField();">
                                                            <mat-autocomplete #auto1="matAutocomplete">
                                                                <mat-option *ngFor="let option of filteredSpravSysCountries | async" [value]="option.name_ru">
                                                                    <div (click)="formBaseInformation.get('country_id').setValue(option.id)">
                                                                        <span style="margin:10px;">{{option.name_ru}}</span>
                                                                    </div>
                                                                </mat-option>
                                                            </mat-autocomplete>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <!-- Регион -->
                                                <!-- <mat-form-field style="display: none">
                                                    <input  matInput
                                                            placeholder="region_id"
                                                            formControlName="region_id"/>
                                                </mat-form-field>
                                                <mat-form-field class="mat-form-field-100" > 
                                                    <input  matInput 
                                                    placeholder="{{t('docs.field.region')}}"
                                                    [matAutocomplete]="auto4" 
                                                    [readonly]=!editability
                                                    [formControl]="searchRegionCtrl"
                                                    (input)="canRegionAutocompleteQuery=true; checkEmptyRegionField();"
                                                    (change)="canRegionAutocompleteQuery=false; checkEmptyRegionField();">
                                                    <mat-autocomplete #auto4="matAutocomplete">
                                                    <ng-container *ngIf="!isRegionListLoading" style="width:320px;">
                                                        <mat-option style="padding:0px" *ngFor="let value of filteredRegions" [value]="value.name_ru">
                                                        <div (click)="onSelectRegion(value.id,value.country_id,value.country_name_ru)">
                                                            <span style="margin:10px;"><b>{{value.name_ru}}</b></span>
                                                        </div>
                                                        </mat-option>
                                                    </ng-container>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                                <mat-progress-bar *ngIf="isRegionListLoading" mode="indeterminate"></mat-progress-bar> -->
                                                
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.region')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.region')}}"
                                                            [readonly]=!editability
                                                            maxlength="120"
                                                            formControlName="region"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('region').value.length>100">{{formBaseInformation.get('region').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                
                                                <!-- Город -->
                                                <!-- <mat-form-field style="display: none">
                                                    <input  matInput
                                                            placeholder="city_id"
                                                            formControlName="city_id"/>
                                                </mat-form-field>
                                                <mat-form-field class="mat-form-field-100" > 
                                                    <mat-label>{{t('docs.field.city_locality')}}</mat-label>
                                                    <input  matInput 
                                                    [matAutocomplete]="auto6" 
                                                    [formControl]="searchCityCtrl"
                                                    [readonly]=!editability
                                                    (input)="canCityAutocompleteQuery=true; checkEmptyCityField();"
                                                    (change)="canCityAutocompleteQuery=false; checkEmptyCityField();">
                                                    <mat-autocomplete #auto6="matAutocomplete">
                                                    <ng-container *ngIf="!isCityListLoading" style="width:320px;">
                                                        <mat-option style="padding:0px" *ngFor="let value of filteredCities" [value]="value.name_ru">
                                                        <div (click)="onSelectCity(value.id,value.area_ru,value.region_id,value.region_name_ru,value.country_id,value.country_name_ru)">
                                                            <span style="margin:10px;"><b>{{value.name_ru}}</b> <i> {{value.area_ru}}</i></span>
                                                        </div>
                                                        </mat-option>
                                                    </ng-container>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                                <mat-progress-bar *ngIf="isCityListLoading" mode="indeterminate"></mat-progress-bar> -->
                                                
                                                
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.city_locality')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.city_locality')}}"
                                                            [readonly]=!editability
                                                            maxlength="120"
                                                            formControlName="city"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('city').value.length>100">{{formBaseInformation.get('city').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                
                                                <!-- Улица -->
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.street')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.street')}}"
                                                            [readonly]=!editability
                                                            maxlength="120"
                                                            formControlName="street"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('street').value.length>100">{{formBaseInformation.get('street').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                                <!-- Дом -->
                                                <div class="row">
                                                    <div class="col-lg-6  col-md-12">
                                                        <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.house')}}</mat-label>
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.house')}}"
                                                                    [readonly]=!editability
                                                                    maxlength="16"
                                                                    formControlName="home"/>
                                                            <mat-hint align="end" *ngIf="formBaseInformation.get('home').value.length>12">{{formBaseInformation.get('home').value.length}} / 16</mat-hint>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="col-lg-6  col-md-12">
                                                        <!-- Квартира -->
                                                        <mat-form-field  class="mat-form-field-100">
                                                            <mat-label>{{t('docs.field.room')}}</mat-label>
                                                            <input   matInput
                                                                    placeholder="{{t('docs.field.room')}}"
                                                                    maxlength="8"
                                                                    [readonly]=!editability
                                                                    formControlName="flat"/>
                                                            <mat-hint align="end" *ngIf="formBaseInformation.get('flat').value.length>6">{{formBaseInformation.get('flat').value.length}} / 8</mat-hint>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <!-- Дополнение к адресу -->
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.addr_addittnl')}}</mat-label>
                                                    <textarea   matInput
                                                            placeholder="{{t('docs.field.addr_addittnl')}}"
                                                            [readonly]=!editability
                                                            maxlength="240"
                                                            formControlName="additional_address">
                                                    </textarea>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('additional_address').value.length>200">{{formBaseInformation.get('additional_address').value.length}} / 240</mat-hint>
                                                </mat-form-field>
                                            </mat-card-content>
                                        </mat-card>
                                    </div>
                                    <div class="col-lg-4 col-xl-4 col-md-12"> 
                                        <mat-card appearance="outlined">
                                            <mat-card-header>
                                                <mat-card-title class="card-title">{{t('docs.card.contacts')}}</mat-card-title>
                                            </mat-card-header>
                                            <mat-card-content class="input-form">
                                                <!-- Телефон -->
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.telephone')}}</mat-label>
                                                    <input   matInput
                                                            [readonly]=!editability
                                                            placeholder="{{t('docs.field.telephone')}}"
                                                            maxlength="60"
                                                            formControlName="telephone"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('telephone').value.length>50">{{formBaseInformation.get('telephone').value.length}} / 60</mat-hint>
                                                </mat-form-field>
                                                <!-- e-mail -->
                                                <mat-form-field>
                                                    <mat-label>e-mail</mat-label>
                                                    <input   matInput
                                                            [readonly]=!editability
                                                            placeholder="e-mail"
                                                            maxlength="254"
                                                            formControlName="email"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('email').value.length>200">{{formBaseInformation.get('email').value.length}} / 254</mat-hint>
                                                </mat-form-field>
                                                <!-- Сайт -->
                                                <mat-form-field>
                                                    <mat-label>{{t('docs.field.site')}}</mat-label>
                                                    <input   matInput
                                                            [readonly]=!editability
                                                            placeholder="{{t('docs.field.site')}}"
                                                            maxlength="120"
                                                            formControlName="site"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('site').value.length>100">{{formBaseInformation.get('site').value.length}} / 120</mat-hint>
                                                </mat-form-field>
                                            </mat-card-content>
                                        </mat-card>  
                                        <mat-card appearance="outlined">
                                            <mat-card-header>
                                                <mat-card-title class="card-title">{{t('docs.card.contact_prsns')}}</mat-card-title>
                                            </mat-card-header>
                                            <mat-card-content class="input-form">
                                                <div cdkDropList (cdkDropListDropped)="dropContact($event)">
                                                    <mat-card   appearance="outlined"   *ngFor="let contact of formBaseInformation.get('cagentsContactsTable').controls;let i = index" 
                                                                [formGroup]="contact"
                                                                cdkDrag
                                                                style="background-color: #f7f7f7">
                                                        <div cdkDragHandle class="handler"  [style.display]="editability?'block':'none'">
                                                            <mat-icon   matTooltip="{{t('docs.tip.move')}}" 
                                                                        class="nav-icon"
                                                                        *ngIf="formBaseInformation.get('cagentsContactsTable').controls.length>1">
                                                                        swap_vertical_circle
                                                            </mat-icon>
                                                        </div>
                                                        <div class="del-icon"  [style.display]="editability?'block':'none'">
                                                            <mat-icon   (click)="deleteContact(i)" 
                                                                        matTooltip="{{t('docs.tip.delete')}}"    
                                                                        class="nav-icon">cancel
                                                            </mat-icon>
                                                        </div>
                                                        <mat-card-content class="input-form" >
                                                            <mat-form-field>
                                                                <mat-label>{{t('docs.field.person_name')}}</mat-label>
                                                                <input   matInput
                                                                        placeholder="{{t('docs.field.person_name')}}"
                                                                        [readonly]=!editability
                                                                        #fio
                                                                        maxlength="200"
                                                                        formControlName="fio"/>
                                                                <mat-hint align="end" *ngIf="fio.value.length>150">{{fio.value.length}} / 200</mat-hint>
                                                            </mat-form-field>
                                                            <mat-form-field>
                                                                <mat-label>{{t('docs.field.position')}}</mat-label>
                                                                <input   matInput
                                                                        placeholder="{{t('docs.field.position')}}"
                                                                        [readonly]=!editability
                                                                        #position
                                                                        maxlength="200"
                                                                        formControlName="position"/>
                                                                <mat-hint align="end" *ngIf="position.value.length>150">{{position.value.length}} / 200</mat-hint>
                                                            </mat-form-field>
                                                            <mat-form-field>
                                                                <mat-label>{{t('docs.field.telephone')}}</mat-label>
                                                                <input   matInput
                                                                        placeholder="{{t('docs.field.telephone')}}"
                                                                        [readonly]=!editability
                                                                        #telephone
                                                                        maxlength="60"
                                                                        formControlName="telephone"/>
                                                                <mat-hint align="end" *ngIf="telephone.value.length>50">{{telephone.value.length}} / 60</mat-hint>
                                                            </mat-form-field>
                                                            <mat-form-field>
                                                                <mat-label>E-mail</mat-label>
                                                                <input   matInput
                                                                        placeholder="E-mail"
                                                                        [readonly]=!editability
                                                                        #email
                                                                        maxlength="254"
                                                                        formControlName="email"/>
                                                                <mat-hint align="end" *ngIf="email.value.length>200">{{email.value.length}} / 254</mat-hint>
                                                            </mat-form-field>
                                                            <mat-form-field>
                                                                <mat-label>{{t('docs.field.additional')}}</mat-label>
                                                                <textarea   matInput
                                                                        placeholder="{{t('docs.field.additional')}}"
                                                                        [readonly]=!editability
                                                                        #additional
                                                                        maxlength="500"
                                                                        formControlName="additional">
                                                                </textarea>
                                                                <mat-hint align="end" *ngIf="additional.value.length>450">{{additional.value.length}} / 500</mat-hint>
                                                            </mat-form-field>
                                                            <mat-form-field style="display: none">
                                                                <input matInput placeholder="id" formControlName="id"/>
                                                            </mat-form-field>
                                                            
                                                            <mat-form-field style="display: none">
                                                                <input   matInput
                                                                        placeholder="output_order"
                                                                        formControlName="output_order"/>
                                                            </mat-form-field>
                                                            <p *cdkDragPreview></p>
                                                        </mat-card-content>
                                                    </mat-card>
                                                </div>
                                                <div class="div-100" [style.display]="((allowToCreate && +id==0)||(allowToUpdate && id>0)) ?'block':'none'"> 
                                                    <div class="center hand" style="width:100%; height: 38px;">
                                                        <button matTooltip="{{t('docs.tip.add_cnt_prsn')}}" mat-mini-fab color="primary" (click)="addNewContact()">
                                                            <mat-icon>add</mat-icon>
                                                        </button>
                                                    </div>
                                                </div>
                                               

                                                
                                            </mat-card-content>
                                        </mat-card>
                                    </div>
                                </div>
                            </div>   
                        </mat-tab>


                        <mat-tab label="{{cu.cap(t('menu.docs.counterpays'))}}" *ngIf="+id>0">
                            <div class="container-fluid">
                                <div class="row" style="padding: 10px">
                                    <div class="col-12">

                                        <app-mutualpayment_det
                                        *ngIf="+id>0 && locale && locale!='' && +formBaseInformation.get('company_id').value>0 && formBaseInformation.get('name').value!=''"
                                        [companyId]="formBaseInformation.get('company_id').value" 
                                        [cagentId]="id"
                                        [cagent]="formBaseInformation.get('name').value"
                                        
                                        ></app-mutualpayment_det>


                                    </div>
                                </div>
                            </div>   
                        </mat-tab>





                        <mat-tab label="{{t('docs.tab.bank_data')}}">
                            <div class="container-fluid">
                                <div class="row" style="padding: 10px">
                                    <div class="col-xl-7 col-lg-10 col-md-12">
                                        <mat-card appearance="outlined">
                                            <mat-card-header>
                                                <mat-card-title class="card-title">{{t('docs.card.bank_data')}}</mat-card-title>
                                            </mat-card-header>
                                            <mat-card-content class="input-form">
                                                <div cdkDropList (cdkDropListDropped)="dropPaymentAccount($event)">
                                                    <mat-card   appearance="outlined"   *ngFor="let req of formBaseInformation.get('cagentsPaymentAccountsTable').controls;let i = index" 
                                                                [formGroup]="req"
                                                                cdkDrag
                                                                style="background-color: #f7f7f7">
                                                        <div cdkDragHandle class="handler"  [style.display]="editability ?'block':'none'">
                                                            <mat-icon   matTooltip="{{t('docs.tip.move')}}" 
                                                                        class="nav-icon"
                                                                        *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls.length>1">
                                                                        swap_vertical_circle
                                                            </mat-icon>
                                                        </div>
                                                        <div class="del-icon"  [style.display]="editability ?'block':'none'">
                                                            <mat-icon   (click)="deletePaymentAccount(i)" 
                                                                        matTooltip="{{t('docs.tip.delete')}}"    
                                                                        class="nav-icon">cancel
                                                            </mat-icon>
                                                        </div>
                                                        <mat-card-content class="input-form" >
                                                            <mat-form-field>
                                                                <mat-label>{{t('docs.field.name')}}</mat-label>
                                                                <input  matInput
                                                                        maxlength="300"
                                                                        [readonly]=!editability
                                                                        #name
                                                                        formControlName="name"/>
                                                                <mat-hint align="end" *ngIf="name.value.length>250">{{name.value.length}} / 300</mat-hint>
                                                                <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('name').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('name').invalid">
                                                                    <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('name').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                </mat-hint> -->
                                                            </mat-form-field>
                                                            <mat-form-field>
                                                                <mat-label>{{t('docs.field.address')}}</mat-label>
                                                                <input  matInput
                                                                        #address
                                                                        [readonly]=!editability
                                                                        maxlength="300"
                                                                        formControlName="address"/>
                                                                <mat-hint align="end" *ngIf="address.value.length>250">{{address.value.length}} / 300</mat-hint>
                                                                <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('address').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('address').invalid">
                                                                    <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('address').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                </mat-hint> -->
                                                            </mat-form-field>
                                                            <div class="row">
                                                                <div class="col-lg-5  col-md-12">
                                                                <mat-form-field class="mat-form-field-100">
                                                                    <mat-label>{{t('docs.field.swift')}}</mat-label>
                                                                    <input  matInput
                                                                            #swift
                                                                            [readonly]=!editability
                                                                            maxlength="11"
                                                                            formControlName="swift"/>
                                                                    <mat-hint align="end" *ngIf="swift.value.length>80">{{swift.value.length}} / 100</mat-hint>
                                                                    <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('swift').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('swift').invalid">
                                                                        <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('swift').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                    </mat-hint> -->
                                                                    <mat-hint align="end" *ngIf="swift.value.length>8">{{swift.value.length}} / 11</mat-hint>
                                                                </mat-form-field>
                                                                </div>
                                                                <div class="col-lg-7  col-md-12">
                                                                <mat-form-field class="mat-form-field-100">
                                                                    <mat-label>{{t('docs.field.iban')}}</mat-label>
                                                                    <input  matInput
                                                                            #iban
                                                                            [readonly]=!editability
                                                                            maxlength="34"
                                                                            formControlName="iban"/>
                                                                    <mat-hint align="end" *ngIf="iban.value.length>30">{{iban.value.length}} / 34</mat-hint>
                                                                    <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('iban').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('iban').invalid">
                                                                        <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('iban').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                    </mat-hint> -->
                                                                </mat-form-field>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-5  col-md-12">
                                                                    <mat-form-field class="mat-form-field-100">
                                                                        <mat-label>{{t('docs.field.bic')}}</mat-label>
                                                                        <input  matInput
                                                                                #bik
                                                                                [readonly]=!editability
                                                                                maxlength="9"
                                                                                formControlName="bik"/>
                                                                        <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('bik').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('bik').invalid">
                                                                            <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('bik').errors.pattern" class="form-invalid">БИК должен состоять из 9 цифр</i>
                                                                            <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('bik').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                        </mat-hint> -->
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="col-lg-7  col-md-12">
                                                                    <mat-form-field class="mat-form-field-100">
                                                                        <mat-label>{{t('docs.field.account')}}</mat-label>
                                                                        <input  matInput
                                                                                #payment_account
                                                                                [readonly]=!editability
                                                                                maxlength="100"
                                                                                formControlName="payment_account"/>
                                                                        <mat-hint align="end" *ngIf="payment_account.value.length>80">{{payment_account.value.length}} / 100</mat-hint>
                                                                        <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('payment_account').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('payment_account').invalid">
                                                                            <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('payment_account').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                        </mat-hint> -->
                                                                    </mat-form-field>
                                                                </div>
                                                            </div>
                                                            <mat-form-field>
                                                                <mat-label>{{t('docs.field.corr_account')}}</mat-label>
                                                                <input  matInput
                                                                        #corr_account
                                                                        [readonly]=!editability
                                                                        maxlength="100"
                                                                        formControlName="corr_account"/>
                                                                <mat-hint align="end" *ngIf="corr_account.value.length>80">{{corr_account.value.length}} / 100</mat-hint>
                                                                <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('corr_account').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('corr_account').invalid">
                                                                    <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('corr_account').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                </mat-hint> -->
                                                            </mat-form-field>                                                            
                                                            <mat-form-field>
                                                                <mat-label>{{t('docs.field.intermediatery')}}</mat-label>
                                                                <input  matInput
                                                                        #intermediatery
                                                                        [readonly]=!editability
                                                                        maxlength="2048"
                                                                        formControlName="intermediatery"/>
                                                                <mat-hint align="end" *ngIf="intermediatery.value.length>1900">{{intermediatery.value.length}} / 2048</mat-hint>
                                                                <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('intermediatery').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('intermediatery').invalid">
                                                                    <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('intermediatery').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                </mat-hint> -->
                                                            </mat-form-field>


                                                            <mat-form-field style="display: none">
                                                                <input matInput placeholder="id" formControlName="id"/>
                                                            </mat-form-field>
                                                            
                                                            <mat-form-field style="display: none">
                                                                <input   matInput
                                                                        placeholder="output_order"
                                                                        formControlName="output_order"/>
                                                            </mat-form-field>
                                                            <p *cdkDragPreview></p>
                                                        </mat-card-content>
                                                    </mat-card>
                                                </div>
                                                <div class="div-100" [style.display]="editability?'block':'none'"> 
                                                    <div class="center hand" style="width:100%; height: 38px;">
                                                        <button matTooltip="{{t('docs.tip.add_bnk_data')}}" mat-mini-fab color="primary" (click)="addNewPaymentAccount()">
                                                            <mat-icon>add</mat-icon>
                                                        </button>
                                                    </div>
                                                </div>
                                            </mat-card-content>
                                        </mat-card>
                                    </div>
                                </div>
                            </div>
                        </mat-tab>
                        <mat-tab  *ngIf="+id>0"  label="{{t('docs.tab.about')}}">
                            <div class="container-fluid">
                                <div class="row" style="padding: 10px">
                                    <div class="col-xl-5 col-lg-9 col-md-12">
                                        <form [formGroup]="formAboutDocument">
                                            <mat-card appearance="outlined">
                                                <mat-card-content class="input-form">
                            
                                                    <mat-form-field [ngClass]="{invisible: +id==0}">
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.company')}}"
                                                                formControlName="company" [readonly]=true/>
                                                    </mat-form-field>
                                                    <mat-form-field [ngClass]="{invisible: +id==0}">
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.creator')}}"
                                                                formControlName="creator" [readonly]=true/>
                                                    </mat-form-field>
                                                    <mat-form-field [ngClass]="{invisible: +id==0}">
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.created')}}"
                                                                formControlName="date_time_created" [readonly]=true/>
                                                    </mat-form-field>
                                                    <mat-form-field [ngClass]="{invisible: +id==0}">
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.changer')}}"
                                                                formControlName="changer" [readonly]=true/>
                                                    </mat-form-field>
                                                    <mat-form-field [ngClass]="{invisible: +id==0}">
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.changed')}}"
                                                                formControlName="date_time_changed" [readonly]=true/>
                                                    </mat-form-field>
                                                </mat-card-content>
                                            </mat-card>  
                                        </form>  
                                    </div>
                                </div>
                            </div>
                        </mat-tab>
                    </mat-tab-group>                
                </mat-card-content> 
            </mat-card>
        </form>
    </div>
</mat-drawer-container>