<mat-card appearance="outlined" class="card for-sticky-header" *transloco="let t">
    <mat-card-header>
        <mat-card-title class="top-bar container-fluid"> 
            <div class="row" id="topBlock">
                <div class="card-name">{{t('docs.docs.company')}}</div>
                <button 
                    mat-raised-button 
                    [style.display]="allowToUpdate"
                    (click)="clickBtnUpdate()"
                    [style.display]="id>0?'flex':'none'"
                    *ngIf="allowToView"
                    [disabled]="!formBaseInformation.valid||oneClickSaveControl" 
                    matTooltip="{{t('docs.tip.save')}}"
                    color="primary"
                    class="button small-button">
                    <i class="material-icons">save</i>
                </button>
                <button 
                    mat-raised-button 
                    [style.display]="id>0?'none':'flex'"
                    (click)="clickBtnCreateNewDocument()" 
                    [disabled]="!formBaseInformation.valid||oneClickSaveControl" 
                    matTooltip="{{t('docs.tip.create')}}"
                    *ngIf="allowToCreate"
                    color="primary"
                    class="button small-button">
                    <i class="material-icons">done</i>
                </button>
                <a routerLink="../{{+id>0?'../':''}}companies" style="text-decoration: none;" [style.display]="(mode=='standart')?'block':'none'" >
                    <button 
                        mat-raised-button 
                        color="accent"
                        [matTooltip]="id>0?t('docs.tip.exit'):t('docs.tip.cancel')"
                        class="button small-button">
                        <i class="material-icons">close</i>
                    </button>
                </a>
                <button [style.display]="(mode=='window')?'flex':'none'"
                    mat-raised-button
                    class="button small-button"
                    matTooltip="{{t('docs.tip.close')}}"
                    matDialogClose 
                    color="accent">
                </button>
            </div>
        </mat-card-title>
    </mat-card-header>
    <mat-card-content *ngIf="rightsDefined && 
    (
        (!allowToView && +id>0) ||
        (!allowToCreate && +id==0)
    )"> 
        <mat-card appearance="outlined" class="internal-card">
            <mat-card-content style="font-size: 20px;font-weight: bold;color: red;text-align: center;height: 100px;padding: 38px 0;">
                {{t('docs.msg.no_perm')}}
            </mat-card-content>
        </mat-card>
    </mat-card-content>
    <!-- !!! -->
    <mat-card-content *ngIf="!rightsDefined || (rightsDefined && (( +id>0 && allowToView)||(+id==0 && allowToCreate)))">
        <!-- accountingCurrency-{{accountingCurrency}}<br>
        countryId-{{countryId}}<br>
        organization-{{organization}}<br> -->

        <form [formGroup]="formBaseInformation">   
            <mat-tab-group>
                <mat-tab label="{{t('docs.tab.info')}}">
                    <div class="container-fluid">
                        <div class="row" style="padding: 10px">
                            <div class="col-lg-4 col-xl-4 col-md-12">    
                                <mat-card appearance="outlined">
                                    <mat-card-header>
                                        <mat-card-title>{{t('docs.card.base_info')}}</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content class="input-form">
                                        <mat-form-field style="display: none">
                                            <input  matInput
                                                    placeholder="id"
                                                    formControlName="id"/>
                                        </mat-form-field>
                                        <!-- Наименование -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.name_short')}} <span *ngIf="formBaseInformation.get('name').value==''||formBaseInformation.get('name').value==null" class="star">*</span></mat-label>
                                            <input   matInput
                                                    [readonly]=!editability
                                                    maxlength="500"
                                                    formControlName="name"/>
                                            <mat-hint align="start" *ngIf="formBaseInformation.get('name').touched">
                                                <i *ngIf="formBaseInformation.get('name').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                            </mat-hint>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('name').value.length>450">{{formBaseInformation.get('name').value.length}} / 500</mat-hint>
                                        </mat-form-field>
                                        <!-- Организационно-правовая форма -->
                                        <!-- <mat-form-field>
                                            <mat-label>{{t('docs.field.form')}} <span *ngIf="+formBaseInformation.get('opf_id').value==0||formBaseInformation.get('opf_id').value==null" class="star">*</span></mat-label>
                                            <mat-select [disabled]=!editability
                                                        formControlName="opf_id" 
                                                        (selectionChange)="setJurElementsVisible()">                          
                                                <mat-option *ngFor="let rt of receivedSpravSysOPF" [value]="rt.id" matTooltip={{rt.description}} >
                                                        {{rt.name}}
                                                </mat-option> 
                                            </mat-select>
                                            <mat-hint align="start" *ngIf="formBaseInformation.get('opf_id').touched">
                                                <i *ngIf="+formBaseInformation.get('opf_id').value==0" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                            </mat-hint>
                                        </mat-form-field> -->
                                        <div class="row">
                                            <div class="col-lg-6  col-md-12">
                                                <mat-form-field  class="mat-form-field-100">
                                                    <mat-label>{{t('docs.field.type')}}</mat-label>
                                                    <mat-select  
                                                        formControlName="type"
                                                        [disabled]=!editability
                                                    >                          
                                                        <mat-option 
                                                            value="entity" 
                                                        >
                                                                {{t('docs.list.entity')}}
                                                        </mat-option>                     
                                                        <mat-option 
                                                            value="individual"
                                                        >
                                                                {{t('docs.list.individual')}}
                                                        </mat-option>                                                 
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-lg-6  col-md-12">
                                                <!-- Код -->
                                                <mat-form-field  class="mat-form-field-100">
                                                    <mat-label>{{t('docs.field.code')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.code')}}"
                                                            [readonly]=!editability
                                                            maxlength="30"
                                                            formControlName="code"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('code').value.length>20">{{formBaseInformation.get('code').value.length}} / 30</mat-hint>
                                                </mat-form-field>
                                            </div>
                                        </div>

                                        <!-- VAT -->
                                        <div class="col-12" style="padding-right: 0px;padding-left: 0px;">
                                            <div class="flex">
                                                <mat-form-field 
                                                [ngClass]="{slideWidth100: !formBaseInformation.get('nds_payer').value,
                                                            slideWidth50left: formBaseInformation.get('nds_payer').value}">
                                                    <mat-slide-toggle 
                                                    formControlName="nds_payer"
                                                    [disabled]="!editability"
                                                    matTooltip="{{t('docs.tip.vat_payer')}}"
                                                    >{{t('docs.field.vat_payer')}}</mat-slide-toggle>
                                                    <input matInput hidden/>
                                                </mat-form-field>
                                                <!-- VAT included into the price -->
                                                <mat-form-field class="slideWidth50right" [ngClass]="{invisible: !formBaseInformation.get('nds_payer').value}">
                                                    <mat-slide-toggle 
                                                    formControlName="nds_included"
                                                    [disabled]="!editability"
                                                    matTooltip="{{t('docs.tip.tax_included')}}"
                                                    >{{t('docs.field.tax_included')}}</mat-slide-toggle>
                                                    <input matInput hidden/>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <!-- Статус -->
                                        <!-- <div *ngIf="id>0" class = "circle-in-selected" [style.background-color]="status_color"></div>
                                        <mat-form-field *ngIf="id>0" class="mat-form-field-100" style="margin-top: -25px;">
                                            <mat-label>Статус предприятия</mat-label>
                                            <mat-select     style="padding: 5px 0 5px 25px;" 
                                                            [disabled]=!editability
                                                            formControlName="status_id"
                                                            (selectionChange)="setStatusColor();">
                                                <mat-option *ngFor="let status of receivedStatusesList" 
                                                            [value]="status.id"
                                                            matTooltip={{status.description}}>
                                                            <div style="display: inline;line-height: 20px;">
                                                                <div class = "circle-wrapper">
                                                                    <div class = "circle-in-list" [style.background-color]="status.color"></div>
                                                                </div>
                                                                <div class = "status-name">{{status.name}}</div>
                                                            </div>
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field> -->
                                        <!-- ФИО управляющего -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.gm_name')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.gm_name')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="fio_director"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('fio_director').value.length>100">{{formBaseInformation.get('fio_director').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        <!-- Должность управляющего -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.pos_gm_name')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.pos_gm_name')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="director_position"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('director_position').value.length>100">{{formBaseInformation.get('director_position').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        <!-- ФИО гл. бухгалтера -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.ch_accntnt')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.ch_accntnt')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="fio_glavbuh"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('fio_glavbuh').value.length>100">{{formBaseInformation.get('fio_glavbuh').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        
                                    </mat-card-content>
                                </mat-card>
                                <mat-card appearance="outlined">
                                    <mat-card-header>
                                        <mat-card-title>{{t('docs.card.base_data')}}</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content class="input-form">
                                        <!-- Полное наименование -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='entity'">
                                            <mat-label>{{t('docs.field.name_full')}}</mat-label>
                                            <textarea   matInput
                                                    placeholder="{{t('docs.field.name_full')}}"
                                                    [readonly]=!editability
                                                    maxlength="500"
                                                    formControlName="jr_jur_full_name">
                                            </textarea>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_jur_full_name').value.length>400">{{formBaseInformation.get('jr_jur_full_name').value.length}} / 500</mat-hint>
                                        </mat-form-field>
                                        <!-- Имя -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual'">
                                            <mat-label>{{t('docs.field.person_name')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.person_name')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="jr_fio_name"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_fio_name').value.length>100">{{formBaseInformation.get('jr_fio_name').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        <!-- Фамилия -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual'">
                                            <mat-label>{{t('docs.field.surname')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.surname')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="jr_fio_family"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_fio_family').value.length>100">{{formBaseInformation.get('jr_fio_family').value.length}} / 120</mat-hint>
                                        </mat-form-field>                                        
                                        <!-- Отчество -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual' && +formBaseInformation.get('jr_country_id').value==1">
                                            <mat-label>{{t('docs.field.middle_name')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.middle_name')}}"
                                                    maxlength="120"
                                                    [readonly]=!editability
                                                    formControlName="jr_fio_otchestvo"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_fio_otchestvo').value.length>100">{{formBaseInformation.get('jr_fio_otchestvo').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        <!-- Правовая форма -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual'">
                                            <mat-label>{{t('docs.field.legal_form')}}</mat-label>
                                            <input  matInput
                                                    placeholder="{{t('docs.field.legal_form')}}"
                                                    maxlength="240"
                                                    [readonly]=!editability
                                                    formControlName="legal_form"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('legal_form').value.length>200">{{formBaseInformation.get('legal_form').value.length}} / 240</mat-hint>
                                        </mat-form-field>
                                        <!-- ИНН -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.'+tinName)}}</mat-label>
                                            <input  matInput
                                                    maxlength="12"
                                                    placeholder="{{t('docs.field.'+tinName)}}"
                                                    [readonly]=!editability                                                    
                                                    formControlName="jr_inn"/>
                                        </mat-form-field>
                                        <!-- VAT -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.'+vatName)}}</mat-label>
                                            <input  matInput
                                                    maxlength="100"
                                                    placeholder="{{t('docs.field.'+vatName)}}"
                                                    [readonly]=!editability
                                                    formControlName="jr_vat"/>
                                        </mat-form-field>
                                        <!-- КПП -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='entity' && +formBaseInformation.get('jr_country_id').value==1">
                                            <mat-label>{{t('docs.field.kpp')}}</mat-label>
                                            <input  matInput
                                                    maxlength="9"
                                                    [readonly]=!editability
                                                    placeholder="{{t('docs.field.kpp')}}"
                                                    (keypress)="numberOnly($event)"
                                                    formControlName="jr_jur_kpp"/>
                                        </mat-form-field>
                                        <!-- ОГРН(ИП) / Registration number -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.'+regNumberName)}}</mat-label>
                                            <input  matInput
                                                    maxlength="13"
                                                    [readonly]=!editability
                                                    placeholder="{{t('docs.field.'+regNumberName)}}"                                                    
                                                    formControlName="jr_jur_ogrn"/>
                                        </mat-form-field>
                                        <!-- ОКПО -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='entity' && +formBaseInformation.get('jr_country_id').value==1">
                                            <mat-label>{{t('docs.field.okpo')}}</mat-label>
                                            <input  matInput
                                                    maxlength="10"
                                                    [readonly]=!editability
                                                    placeholder="{{t('docs.field.okpo')}}"
                                                    (keypress)="numberOnly($event)"
                                                    formControlName="jr_okpo"/>
                                            <mat-hint  align="start" *ngIf="formBaseInformation.get('jr_okpo').touched && formBaseInformation.get('jr_okpo').invalid">
                                                <!-- <i *ngIf="formBaseInformation.get('jr_okpo').errors.pattern" class="form-invalid">ОКПО должен состоять из 8 или 10 цифр</i> -->
                                            </mat-hint>
                                        </mat-form-field>
                                        <!-- Номер свидетельства -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual' && +formBaseInformation.get('jr_country_id').value==1">
                                            <mat-label>{{t('docs.field.reg_doc_num')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.reg_doc_num')}}"
                                                    [readonly]=!editability
                                                    maxlength="30"
                                                    formControlName="jr_ip_svid_num"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_ip_svid_num').value.length>25">{{formBaseInformation.get('jr_ip_svid_num').value.length}} / 30</mat-hint>
                                        </mat-form-field>
                                        <!-- Дата регистрации -->
                                        <mat-form-field *ngIf="formBaseInformation.get('type').value=='individual' && +formBaseInformation.get('jr_country_id').value==1">
                                            <mat-label>{{t('docs.field.reg_date')}}</mat-label>
                                            <input  matInput 
                                                    placeholder="{{t('docs.field.reg_date')}}"
                                                    [readonly]=!editability
                                                    formControlName="jr_ip_reg_date"
                                                    [ngClass]="{'is-invalid':formBaseInformation.get('jr_ip_reg_date').touched && formBaseInformation.get('jr_ip_reg_date').invalid}"
                                                    [matDatepicker]="dp"/>
                                                    <mat-datepicker-toggle *ngIf="editability" matSuffix [for]="dp"></mat-datepicker-toggle>
                                            <mat-datepicker #dp></mat-datepicker>
                                            <mat-hint *ngIf="formBaseInformation.get('jr_ip_reg_date').touched && formBaseInformation.get('jr_ip_reg_date').invalid" class="invalid-feedback">
                                                <i class="form-invalid">{{t('docs.error.date_format')}}</i>
                                            </mat-hint>
                                        </mat-form-field>
                                    </mat-card-content>
                                </mat-card>
                            </div> 
                            <div class="col-lg-4 col-xl-4 col-md-12">   
                                <mat-card appearance="outlined">
                                    <div class="del-icon"  [style.display]="editability?'block':'none'">
                                        <mat-icon   (click)="copyfromAddressToJurAddress()" 
                                                    matTooltip="{{t('docs.tip.addr_copy_q')}}" 
                                                    class="nav-icon">content_copy
                                        </mat-icon>
                                    </div>
                                    <mat-card-header>
                                        <mat-card-title>{{t('docs.card.legal_address')}}</mat-card-title>
                                    </mat-card-header>
                                    
                                    <mat-card-content class="input-form">
                                        <!-- Индекс -->
                                        <div class="row">
                                            <div class="col-lg-6  col-md-12">
                                                <mat-form-field  class="mat-form-field-100">
                                                    <mat-label>{{t('docs.field.zip_code')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.zip_code')}}"
                                                            [readonly]=!editability
                                                            maxlength="40"
                                                            formControlName="jr_zip_code"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_zip_code').value.length>30">{{formBaseInformation.get('jr_zip_code').value.length}} / 40</mat-hint>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-lg-6  col-md-12">
                                                <!-- Country -->
                                                <mat-form-field  style="display: none;" >
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.country')}}"
                                                            [readonly]=!editability
                                                            formControlName="jr_country_id"/>
                                                </mat-form-field>
                                                <mat-form-field style="width:100%">
                                                    <mat-label>{{t('docs.field.country')}}</mat-label>
                                                    <input matInput
                                                    type="text"
                                                    [readonly]=!editability
                                                    formControlName="jr_country" 
                                                    [matAutocomplete]="auto2" 
                                                    (input)="checkEmptyListField('jr_country');"
                                                    (change)="checkEmptyListField('jr_country');">
                                                    <mat-autocomplete #auto2="matAutocomplete">
                                                        <mat-option *ngFor="let option of filteredSpravSysJrCountries | async" [value]="option.name_ru">
                                                            <div (click)="formBaseInformation.get('jr_country_id').setValue(option.id)">
                                                                <span style="margin:10px;">{{option.name_ru}}</span>
                                                            </div>
                                                        </mat-option>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <!-- Регион -->
                                        <!-- <mat-form-field style="display: none">
                                            <input  matInput
                                                    placeholder="jr_region_id"
                                                    [readonly]=!editability
                                                    formControlName="jr_region_id"/>
                                        </mat-form-field>
                                        <mat-form-field class="mat-form-field-100" > 
                                            <input  matInput 
                                            placeholder="{{t('docs.field.region')}}"
                                            [matAutocomplete]="auto5" 
                                            [formControl]="searchJrRegionCtrl"
                                            [readonly]=!editability
                                            (input)="canJrRegionAutocompleteQuery=true; checkEmptyJrRegionField();"
                                            (change)="canJrRegionAutocompleteQuery=false; checkEmptyJrRegionField();">
                                            <mat-autocomplete #auto5="matAutocomplete">
                                            <ng-container *ngIf="!isJrRegionListLoading" style="width:320px;">
                                                <mat-option style="padding:0px" *ngFor="let value of filteredJrRegions" [value]="value.name_ru">
                                                <div (click)="onSelectJrRegion(value.id,value.country_id,value.country_name_ru)">
                                                    <span style="margin:10px;"><b>{{value.name_ru}}</b></span>
                                                </div>
                                                </mat-option>
                                            </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                        <mat-progress-bar *ngIf="isJrRegionListLoading" mode="indeterminate"></mat-progress-bar> -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.region')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.region')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="jr_region"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_region').value.length>100">{{formBaseInformation.get('jr_region').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        <!-- Город -->
                                        <!-- <mat-form-field style="display: none">
                                            <input  matInput
                                                    placeholder="jr_city_id"
                                                    [readonly]=!editability
                                                    formControlName="jr_city_id"/>
                                        </mat-form-field>
                                        <mat-form-field class="mat-form-field-100" > 
                                            <mat-label>{{t('docs.field.city_locality')}}</mat-label>
                                            <input  matInput 
                                            [matAutocomplete]="auto7" 
                                            [formControl]="searchJrCityCtrl"
                                            [readonly]=!editability
                                            (input)="canJrCityAutocompleteQuery=true; checkEmptyJrCityField();"
                                            (change)="canJrCityAutocompleteQuery=false; checkEmptyJrCityField();">
                                            <mat-autocomplete #auto7="matAutocomplete">
                                            <ng-container *ngIf="!isJrCityListLoading" style="width:320px;">
                                                <mat-option style="padding:0px" *ngFor="let value of filteredJrCities" [value]="value.name_ru">
                                                <div (click)="onSelectJrCity(value.id,value.area_ru,value.region_id,value.region_name_ru,value.country_id,value.country_name_ru)">
                                                    <span style="margin:10px;"><b>{{value.name_ru}}</b> <i> {{value.area_ru}}</i></span>
                                                </div>
                                                </mat-option>
                                            </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                        <mat-progress-bar *ngIf="isJrCityListLoading" mode="indeterminate"></mat-progress-bar> -->
                                        
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.city_locality')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.city_locality')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="jr_city"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_city').value.length>100">{{formBaseInformation.get('jr_city').value.length}} / 120</mat-hint>
                                        </mat-form-field>

                                        <!-- Улица -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.street')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.street')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="jr_street"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_street').value.length>100">{{formBaseInformation.get('jr_street').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        <div class="row">
                                            <div class="col-lg-6  col-md-12">
                                                <mat-form-field  class="mat-form-field-100">
                                                    <mat-label>{{t('docs.field.house')}}</mat-label>
                                                <!-- Дом -->
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.house')}}"
                                                            [readonly]=!editability
                                                            maxlength="16"
                                                            formControlName="jr_home"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_home').value.length>12">{{formBaseInformation.get('jr_home').value.length}} / 16</mat-hint>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-lg-6  col-md-12">
                                                <!-- Квартира -->
                                                <mat-form-field  class="mat-form-field-100">
                                                    <mat-label>{{t('docs.field.room')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.room')}}"
                                                            [readonly]=!editability
                                                            maxlength="8"
                                                            formControlName="jr_flat"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('jr_flat').value.length>6">{{formBaseInformation.get('jr_flat').value.length}} / 8</mat-hint>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <!-- Дополнение к адресу -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.addr_addittnl')}}</mat-label>
                                            <textarea   matInput
                                                    placeholder="{{t('docs.field.addr_addittnl')}}"
                                                    [readonly]=!editability
                                                    maxlength="240"
                                                    formControlName="jr_additional_address">
                                            </textarea>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('jr_additional_address').value.length>200">{{formBaseInformation.get('jr_additional_address').value.length}} / 240</mat-hint>
                                        </mat-form-field>
                                    </mat-card-content>
                                </mat-card>  
                                <mat-card appearance="outlined">
                                    <!-- АДРЕС -->
                                    <div class="del-icon"  [style.display]="editability?'block':'none'">
                                        <mat-icon   (click)="copyfromJurAddressToAddress()" 
                                                    matTooltip="{{t('docs.tip.addr_copy_qj')}}"  
                                                    class="nav-icon">content_copy
                                        </mat-icon>
                                    </div>
                                    <mat-card-header>
                                        <mat-card-title>{{t('docs.card.address')}}</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content class="input-form">
                                        <!-- <pre>
                                            {{formBaseInformation.get('companiesPaymentAccountsTable').value | json}}
                                            </pre> -->
                                        <!-- Индекс -->
                                        <div class="row">
                                            <div class="col-lg-6  col-md-12">
                                                <mat-form-field  class="mat-form-field-100">
                                                    <mat-label>{{t('docs.field.zip_code')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.zip_code')}}"
                                                            [readonly]=!editability
                                                            maxlength="40"
                                                            formControlName="zip_code"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('zip_code').value.length>30">{{formBaseInformation.get('zip_code').value.length}} / 40</mat-hint>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-lg-6  col-md-12">
                                                <!-- Country -->
                                                <mat-form-field  style="display: none;" >
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.country')}}"
                                                            [readonly]=!editability
                                                            formControlName="country_id"/>
                                                </mat-form-field>
                                                <mat-form-field style="width:100%">
                                                    <mat-label>{{t('docs.field.country')}}</mat-label>
                                                    <input matInput
                                                    type="text"
                                                    [readonly]=!editability
                                                    formControlName="country" 
                                                    [matAutocomplete]="auto3" 
                                                    (input)="checkEmptyListField('country');"
                                                    (change)="checkEmptyListField('country');">
                                                    <mat-autocomplete #auto3="matAutocomplete">
                                                        <mat-option *ngFor="let option of filteredSpravSysCountries | async" [value]="option.name_ru">
                                                            <div (click)="formBaseInformation.get('country_id').setValue(option.id)">
                                                                <span style="margin:10px;">{{option.name_ru}}</span>
                                                            </div>
                                                        </mat-option>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        



                                        <!-- Регион -->
                                        <!-- <mat-form-field style="display: none">
                                            <input  matInput
                                                    placeholder="region_id"
                                                    formControlName="region_id"/>
                                        </mat-form-field>
                                        <mat-form-field class="mat-form-field-100" > 
                                            <input  matInput 
                                            placeholder="{{t('docs.field.region')}}"
                                            [matAutocomplete]="auto4" 
                                            [readonly]=!editability
                                            [formControl]="searchRegionCtrl"
                                            (input)="canRegionAutocompleteQuery=true; checkEmptyRegionField();"
                                            (change)="canRegionAutocompleteQuery=false; checkEmptyRegionField();">
                                            <mat-autocomplete #auto4="matAutocomplete">
                                            <ng-container *ngIf="!isRegionListLoading" style="width:320px;">
                                                <mat-option style="padding:0px" *ngFor="let value of filteredRegions" [value]="value.name_ru">
                                                <div (click)="onSelectRegion(value.id,value.country_id,value.country_name_ru)">
                                                    <span style="margin:10px;"><b>{{value.name_ru}}</b></span>
                                                </div>
                                                </mat-option>
                                            </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                        <mat-progress-bar *ngIf="isRegionListLoading" mode="indeterminate"></mat-progress-bar> -->
                                        
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.region')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.region')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="region"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('region').value.length>100">{{formBaseInformation.get('region').value.length}} / 120</mat-hint>
                                        </mat-form-field>

                                        <!-- Город -->
                                        <!-- <mat-form-field style="display: none">
                                            <input  matInput
                                                    placeholder="city_id"
                                                    formControlName="city_id"/>
                                        </mat-form-field>
                                        <mat-form-field class="mat-form-field-100" > 
                                            <mat-label>{{t('docs.field.city_locality')}}</mat-label>
                                            <input  matInput 
                                            [matAutocomplete]="auto6" 
                                            [formControl]="searchCityCtrl"
                                            [readonly]=!editability
                                            (input)="canCityAutocompleteQuery=true; checkEmptyCityField();"
                                            (change)="canCityAutocompleteQuery=false; checkEmptyCityField();">
                                            <mat-autocomplete #auto6="matAutocomplete">
                                            <ng-container *ngIf="!isCityListLoading" style="width:320px;">
                                                <mat-option style="padding:0px" *ngFor="let value of filteredCities" [value]="value.name_ru">
                                                <div (click)="onSelectCity(value.id,value.area_ru,value.region_id,value.region_name_ru,value.country_id,value.country_name_ru)">
                                                    <span style="margin:10px;"><b>{{value.name_ru}}</b> <i> {{value.area_ru}}</i></span>
                                                </div>
                                                </mat-option>
                                            </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                        <mat-progress-bar *ngIf="isCityListLoading" mode="indeterminate"></mat-progress-bar> -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.city_locality')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.city_locality')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="city"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('city').value.length>100">{{formBaseInformation.get('city').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        <!-- Улица -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.street')}}</mat-label>
                                            <input   matInput
                                                    placeholder="{{t('docs.field.street')}}"
                                                    [readonly]=!editability
                                                    maxlength="120"
                                                    formControlName="street"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('street').value.length>100">{{formBaseInformation.get('street').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                        <div class="row">
                                            <div class="col-lg-6  col-md-12">
                                                <mat-form-field  class="mat-form-field-100">
                                                    <mat-label>{{t('docs.field.house')}}</mat-label>
                                                <!-- Дом -->
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.house')}}"
                                                            [readonly]=!editability
                                                            maxlength="16"
                                                            formControlName="home"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('home').value.length>12">{{formBaseInformation.get('home').value.length}} / 16</mat-hint>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-lg-6  col-md-12">
                                                <!-- Квартира -->
                                                <mat-form-field  class="mat-form-field-100">
                                                    <mat-label>{{t('docs.field.room')}}</mat-label>
                                                    <input   matInput
                                                            placeholder="{{t('docs.field.room')}}"
                                                            maxlength="8"
                                                            [readonly]=!editability
                                                            formControlName="flat"/>
                                                    <mat-hint align="end" *ngIf="formBaseInformation.get('flat').value.length>6">{{formBaseInformation.get('flat').value.length}} / 8</mat-hint>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <!-- Дополнение к адресу -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.addr_addittnl')}}</mat-label>
                                            <textarea   matInput
                                                    placeholder="{{t('docs.field.addr_addittnl')}}"
                                                    [readonly]=!editability
                                                    maxlength="240"
                                                    formControlName="additional_address">
                                            </textarea>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('additional_address').value.length>200">{{formBaseInformation.get('additional_address').value.length}} / 240</mat-hint>
                                        </mat-form-field>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                            <div class="col-lg-4 col-xl-4 col-md-12"> 
                                <mat-card appearance="outlined">
                                    <mat-card-header>
                                        <mat-card-title>{{t('docs.card.contacts')}}</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content class="input-form">
                                        <!-- Телефон -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.telephone')}}</mat-label>
                                            <input   matInput
                                                    [readonly]=!editability
                                                    placeholder="{{t('docs.field.telephone')}}"
                                                    maxlength="60"
                                                    formControlName="telephone"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('telephone').value.length>50">{{formBaseInformation.get('telephone').value.length}} / 60</mat-hint>
                                        </mat-form-field>
                                        <!-- e-mail -->
                                        <mat-form-field>
                                            <mat-label>e-mail</mat-label>
                                            <input   matInput
                                                    [readonly]=!editability
                                                    placeholder="e-mail"
                                                    maxlength="254"
                                                    formControlName="email"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('email').value.length>200">{{formBaseInformation.get('email').value.length}} / 254</mat-hint>
                                        </mat-form-field>
                                        <!-- Сайт -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.site')}}</mat-label>
                                            <input   matInput
                                                    [readonly]=!editability
                                                    placeholder="{{t('docs.field.site')}}"
                                                    maxlength="120"
                                                    formControlName="site"/>
                                            <mat-hint align="end" *ngIf="formBaseInformation.get('site').value.length>100">{{formBaseInformation.get('site').value.length}} / 120</mat-hint>
                                        </mat-form-field>
                                    </mat-card-content>
                                </mat-card> 
                                <mat-card appearance="outlined" *ngIf="+id>0">
                                    <mat-card-header>
                                        <mat-card-title>{{t('docs.card.files')}}</mat-card-title>
                                    </mat-card-header>
                                    <mat-expansion-panel>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                {{t('docs.field.files_doc_frm')}}
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <!-- <mat-card> -->
                                            <!-- <mat-card-content class="input-form"> -->
                                                <!-- Подпись руководителя -->
                                                <div class="input-form">
                                                    <mat-form-field *ngIf="id>0">
                                                        <mat-label>{{t('docs.field.gm_sign')}}</mat-label>
                                                        <div *ngIf="editability && !formBaseInformation.get('director_signature_id').value" class="add-file">
                                                            <mat-icon   
                                                                matTooltip="{{t('docs.tip.add_file')}}"
                                                                class="hand add_circle"
                                                                (click)="addFileInField('director')">
                                                                add_circle
                                                            </mat-icon>
                                                        </div>
                                                        <div style="min-width:70px;">
                                                            <mat-icon   *ngIf="formBaseInformation.get('director_signature_id').value"
                                                                        class="open-file"
                                                                        (click)="openFileCard(formBaseInformation.get('director_signature_id').value)"
                                                                        matTooltip="{{t('docs.tip.open_file')}}"
                                                                    >
                                                                <mat-icon>launch</mat-icon>
                                                            </mat-icon>
                                                            <mat-icon 
                                                                    *ngIf="editability && formBaseInformation.get('director_signature_id').value"
                                                                    class="del-file"
                                                                    (click)="deleteFileInField('director')"
                                                                    matTooltip="{{t('docs.tip.del_file')}}"
                                                                    >
                                                                <mat-icon>delete_forever</mat-icon>
                                                            </mat-icon>
                                                        </div>
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.gm_sign')}}"
                                                                [readonly]=true
                                                                formControlName="director_signature_filename"/>
                                                    </mat-form-field>
                                                    <!-- Подпись гл. бухгалтера -->
                                                    <mat-form-field *ngIf="id>0">
                                                        <mat-label>{{t('docs.field.acnt_sign')}}</mat-label>
                                                        <div *ngIf="editability && !formBaseInformation.get('glavbuh_signature_id').value" class="add-file">
                                                            <mat-icon   
                                                                matTooltip="{{t('docs.tip.add_file')}}"
                                                                class="hand add_circle"
                                                                (click)="addFileInField('glavbuh')">
                                                                add_circle
                                                            </mat-icon>
                                                        </div>
                                                        <div style="min-width:70px;">
                                                            <mat-icon   *ngIf="formBaseInformation.get('glavbuh_signature_id').value"
                                                                        class="open-file"
                                                                        (click)="openFileCard(formBaseInformation.get('glavbuh_signature_id').value)"
                                                                        matTooltip="{{t('docs.tip.open_file')}}"
                                                                    >
                                                                <mat-icon>launch</mat-icon>
                                                            </mat-icon>
                                                            <mat-icon 
                                                                    *ngIf="editability && formBaseInformation.get('glavbuh_signature_id').value"
                                                                    class="del-file"
                                                                    (click)="deleteFileInField('glavbuh')"
                                                                    matTooltip="{{t('docs.tip.del_file')}}"
                                                                    >
                                                                <mat-icon>delete_forever</mat-icon>
                                                            </mat-icon>
                                                        </div>
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.acnt_sign')}}"
                                                                [readonly]=true
                                                                formControlName="glavbuh_signature_filename"/>
                                                    </mat-form-field>
                                                    <!-- Печать предприятия -->
                                                    <mat-form-field *ngIf="id>0">
                                                        <mat-label>{{t('docs.field.comp_stamp')}}</mat-label>
                                                        <div *ngIf="editability && !formBaseInformation.get('stamp_id').value" class="add-file">
                                                            <mat-icon   
                                                                matTooltip="{{t('docs.tip.add_file')}}"
                                                                class="hand add_circle"
                                                                (click)="addFileInField('stamp')">
                                                                add_circle
                                                            </mat-icon>
                                                        </div>
                                                        <div style="min-width:70px;">
                                                            <mat-icon   *ngIf="formBaseInformation.get('stamp_id').value"
                                                                        class="open-file"
                                                                        (click)="openFileCard(formBaseInformation.get('stamp_id').value)"
                                                                        matTooltip="{{t('docs.tip.open_file')}}"
                                                                    >
                                                                <mat-icon>launch</mat-icon>
                                                            </mat-icon>
                                                            <mat-icon 
                                                                    *ngIf="editability && formBaseInformation.get('stamp_id').value"
                                                                    class="del-file"
                                                                    (click)="deleteFileInField('stamp')"
                                                                    matTooltip="{{t('docs.tip.del_file')}}"
                                                                    >
                                                                <mat-icon>delete_forever</mat-icon>
                                                            </mat-icon>
                                                        </div>
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.comp_stamp')}}"
                                                                [readonly]=true
                                                                formControlName="stamp_filename"/>
                                                    </mat-form-field>
                                                    <!-- Файл шаблона карточки предприятия -->
                                                    <!-- <mat-form-field *ngIf="id>0">
                                                        <div *ngIf="editability && !formBaseInformation.get('card_template_id').value" class="add-file">
                                                            <mat-icon   
                                                                matTooltip="{{t('docs.tip.add_file')}}"
                                                                class="hand add_circle"
                                                                (click)="addFileInField('card_template')">
                                                                add_circle
                                                            </mat-icon>
                                                        </div>
                                                        <div style="min-width:70px;">
                                                            <mat-icon   *ngIf="formBaseInformation.get('card_template_id').value"
                                                                        class="open-file"
                                                                        (click)="openFileCard(formBaseInformation.get('card_template_id').value)"
                                                                        matTooltip="{{t('docs.tip.open_file')}}"
                                                                    >
                                                                <mat-icon>launch</mat-icon>
                                                            </mat-icon>
                                                            <mat-icon 
                                                                    *ngIf="editability && formBaseInformation.get('card_template_id').value"
                                                                    class="del-file"
                                                                    (click)="deleteFileInField('card_template')"
                                                                    matTooltip="{{t('docs.tip.del_file')}}"
                                                                    >
                                                                <mat-icon>delete_forever</mat-icon>
                                                            </mat-icon>
                                                        </div>
                                                        <input  matInput
                                                                placeholder="{{t('docs.field.file_templ_cr')}}"
                                                                [readonly]=true
                                                                formControlName="card_template_original_filename"/>
                                                    </mat-form-field> -->
                                                </div>
                                            <!-- </mat-card-content> -->
                                        <!-- </mat-card>  -->
                                    </mat-expansion-panel>
                                    <mat-card-content class="input-form" style="margin-top: 20px !important;">
                                        <div class="box-list">
                                            <ng-container *ngFor="let i of filesInfo">
                                                <div class="filename-row">
                                                    <div class="file-wrapper">
                                                        <span> {{ i.original_name }}</span>
                                                    </div>
                                                    <div style="min-width:70px;">
                                                        <button mat-icon-button
                                                                (click)="openFileCard(i.id)"
                                                                matTooltip="{{t('docs.tip.open_file')}}"
                                                                matSuffix>
                                                            <mat-icon>launch</mat-icon>
                                                        </button>
                                                        <button mat-icon-button 
                                                                *ngIf="editability"
                                                                class="min-heigth"
                                                                type="button"
                                                                (click)="clickBtnDeleteFile(i.id)"
                                                                matTooltip="{{t('docs.tip.del_file')}}"
                                                                matSuffix>
                                                            <mat-icon>delete_forever</mat-icon>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-container>
                                        </div>
                                        <div class="div-100" *ngIf="editability"> 
                                            <div class="center" style="width:100%; height: 38px;">
                                                <button class="hand" matTooltip="{{t('docs.tip.add_file')}}" mat-mini-fab color="primary" (click)="openDialogAddFiles()" matTooltip="Загрузить файл">
                                                    <mat-icon>add</mat-icon>
                                                </button>
                                            </div>
                                        </div> 
                                    </mat-card-content>
                                </mat-card> 
                            </div>
                        </div>
                    </div>   
                </mat-tab>
                <mat-tab label="{{t('docs.tab.bank_data')}}">
                    <div class="container-fluid">
                        <div class="row" style="padding: 10px">
                            <div class="col-xl-7 col-lg-10 col-md-12">
                                <mat-card appearance="outlined">
                                    <mat-card-header>
                                        <mat-card-title>{{t('docs.card.bank_data')}}</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content class="input-form">
                                        <div cdkDropList (cdkDropListDropped)="dropPaymentAccount($event)">
                                            <mat-card   appearance="outlined"   *ngFor="let req of formBaseInformation.get('companiesPaymentAccountsTable').controls;let i = index" 
                                                        [formGroup]="req"
                                                        cdkDrag
                                                        style="background-color: #f7f7f7">
                                                <!-- <div cdkDragHandle class="handler"  [style.display]="editability ?'block':'none'">
                                                    <mat-icon   matTooltip="{{t('docs.tip.move')}}" 
                                                                class="nav-icon"
                                                                *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls.length>1">
                                                                swap_vertical_circle
                                                    </mat-icon>
                                                </div>
                                                <div class="del-icon"  [style.display]="editability ?'block':'none'">
                                                    <mat-icon   (click)="deletePaymentAccount(i)" 
                                                                matTooltip="{{t('docs.tip.delete')}}"    
                                                                class="nav-icon">cancel
                                                    </mat-icon>
                                                </div> -->
                                                <mat-card-content class="input-form" >
                                                    <mat-form-field>
                                                        <mat-label>{{t('docs.field.name')}}</mat-label>
                                                        <input  matInput
                                                                maxlength="300"
                                                                [readonly]=true
                                                                #name
                                                                formControlName="name"/>
                                                        <!-- <mat-hint align="end" *ngIf="name.value.length>250">{{name.value.length}} / 300</mat-hint>
                                                        <mat-hint align="start" *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('name').touched && formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('name').invalid">
                                                            <i *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('name').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                        </mat-hint> -->
                                                    </mat-form-field>
                                                    <mat-form-field>
                                                        <mat-label>{{t('docs.field.address')}}</mat-label>
                                                        <input  matInput
                                                                #address
                                                                [readonly]=true
                                                                maxlength="300"
                                                                formControlName="address"/>
                                                        <!-- <mat-hint align="end" *ngIf="address.value.length>250">{{address.value.length}} / 300</mat-hint>
                                                        <mat-hint align="start" *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('address').touched && formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('address').invalid">
                                                            <i *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('address').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                        </mat-hint> -->
                                                    </mat-form-field>
                                                    <div class="row">
                                                        <div class="col-lg-5     col-md-12">
                                                            <mat-form-field class="mat-form-field-100">
                                                                <mat-label>{{t('docs.field.swift')}}</mat-label>
                                                                <input  matInput
                                                                        #swift
                                                                        [readonly]=true
                                                                        maxlength="11"
                                                                        formControlName="swift"/>
                                                                <!-- <mat-hint align="end" *ngIf="swift.value.length>80">{{swift.value.length}} / 100</mat-hint> -->
                                                                <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('swift').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('swift').invalid">
                                                                    <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('swift').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                </mat-hint> -->
                                                                <!-- <mat-hint align="end" *ngIf="swift.value.length>8">{{swift.value.length}} / 11</mat-hint> -->
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-lg-7  col-md-12">
                                                            <mat-form-field class="mat-form-field-100">
                                                                <mat-label>{{t('docs.field.iban')}}</mat-label>
                                                                <input  matInput
                                                                        #iban
                                                                        [readonly]=true
                                                                        maxlength="34"
                                                                        formControlName="iban"/>
                                                                <!-- <mat-hint align="end" *ngIf="iban.value.length>30">{{iban.value.length}} / 34</mat-hint> -->
                                                                <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('iban').touched && formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('iban').invalid">
                                                                    <i *ngIf="formBaseInformation.get('cagentsPaymentAccountsTable').controls[i].get('iban').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                </mat-hint> -->
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-5 col-md-12">
                                                            <mat-form-field class="mat-form-field-100">
                                                                <mat-label>{{t('docs.field.bic')}}</mat-label>
                                                                <input  matInput
                                                                        #bik
                                                                        [readonly]=true
                                                                        maxlength="9"
                                                                        formControlName="bik"/>
                                                                <!-- <mat-hint align="start" *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('bik').touched && formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('bik').invalid">
                                                                    <i *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('bik').errors.pattern" class="form-invalid">БИК должен состоять из 9 цифр</i>
                                                                    <i *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('bik').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                </mat-hint> -->
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-lg-7 col-md-12">
                                                            <mat-form-field class="mat-form-field-100">
                                                                <mat-label>{{t('docs.field.account')}}</mat-label>
                                                                <input  matInput
                                                                        #payment_account
                                                                        (keypress)="numberOnly($event)"
                                                                        [readonly]=true
                                                                        maxlength="100"
                                                                        formControlName="payment_account"/>
                                                                <!-- <mat-hint align="end" *ngIf="payment_account.value.length>80">{{payment_account.value.length}} / 100</mat-hint>
                                                                <mat-hint align="start" *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('payment_account').touched && formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('payment_account').invalid">
                                                                    <i *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('payment_account').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                                </mat-hint> -->
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                    <mat-form-field>
                                                        <mat-label>{{t('docs.field.corr_account')}}</mat-label>
                                                        <input  matInput
                                                                #corr_account
                                                                [readonly]=true
                                                                (keypress)="numberOnly($event)"
                                                                maxlength="100"
                                                                formControlName="corr_account"/>
                                                        <!-- <mat-hint align="end" *ngIf="corr_account.value.length>80">{{corr_account.value.length}} / 100</mat-hint>
                                                        <mat-hint align="start" *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('corr_account').touched && formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('corr_account').invalid">
                                                            <i *ngIf="formBaseInformation.get('companiesPaymentAccountsTable').controls[i].get('corr_account').value==''" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                                        </mat-hint> -->
                                                    </mat-form-field>
                                                    <mat-form-field style="display: none">
                                                        <input matInput placeholder="id" formControlName="id"/>
                                                    </mat-form-field>
                                                    
                                                    <mat-form-field style="display: none">
                                                        <input   matInput
                                                                placeholder="output_order"
                                                                formControlName="output_order"/>
                                                    </mat-form-field>
                                                    <p *cdkDragPreview></p>
                                                </mat-card-content>
                                            </mat-card>
                                        </div>
                                        <!-- <div class="div-100" [style.display]="editability?'block':'none'"> 
                                            <div class="center hand" style="width:100%; height: 38px;">
                                                <button matTooltip="{{t('docs.tip.add_bnk_data')}}" mat-mini-fab color="primary" (click)="addNewPaymentAccount()">
                                                    <mat-icon>add</mat-icon>
                                                </button>
                                            </div>
                                        </div> -->
                                    </mat-card-content>
                                </mat-card>
                            </div>
                        </div>
                    </div>
                </mat-tab>
                <!-- Настройки/Settings -->
                <mat-tab  *ngIf="+id>0"  label="{{t('docs.tab.settings')}}">
                    <div class="container-fluid">
                        <div class="row" style="padding: 10px">
                            <div class="col-xl-5 col-lg-9 col-md-12">
                                <mat-card appearance="outlined">
                                    <mat-card-content class="input-form">
                
                                        <!-- Валюта/Currency -->
                                        <!-- <mat-form-field>
                                            <mat-label>{{t('docs.field.currency')}}</mat-label>
                                            <mat-select  formControlName="currency_id" [disabled]=!editability>                          
                                                <mat-option  *ngFor="let rt of receivedCurrencyList" [value]="rt.id">
                                                        {{rt.name_okb}}
                                                </mat-option> 
                                            </mat-select>
                                            <mat-hint align="start" *ngIf="formBaseInformation.get('currency_id').touched">
                                                <i *ngIf="+formBaseInformation.get('currency_id').value==0" class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                            </mat-hint>
                                        </mat-form-field> -->

                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.prefix_pieced')}}</mat-label>
                                            <input   matInput
                                                    [readonly]=!editability
                                                    (keypress)="numberOnly($event)"
                                                    matTooltip="{{t('docs.tip.prefix_pieced')}}"
                                                    maxlength="2"
                                                    formControlName="st_prefix_barcode_pieced"/>                                                    
                                            <mat-hint  align="start" *ngIf="formBaseInformation.get('st_prefix_barcode_pieced').touched && formBaseInformation.get('st_prefix_barcode_pieced').invalid">
                                                <i *ngIf="formBaseInformation.get('st_prefix_barcode_pieced').errors.pattern" class="form-invalid">{{t('docs.error.num_digits',{num:"2"})}}</i>
                                            </mat-hint>
                                        </mat-form-field>
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.prefix_packed')}}</mat-label>
                                            <input   matInput
                                                    [readonly]=!editability
                                                    (keypress)="numberOnly($event)"
                                                    matTooltip="{{t('docs.tip.prefix_packed')}}"
                                                    maxlength="2"
                                                    formControlName="st_prefix_barcode_packed"/>                                            
                                                    <mat-hint  align="start" *ngIf="formBaseInformation.get('st_prefix_barcode_packed').touched && formBaseInformation.get('st_prefix_barcode_packed').invalid">
                                                        <i *ngIf="formBaseInformation.get('st_prefix_barcode_packed').errors.pattern" class="form-invalid">{{t('docs.error.num_digits',{num:"2"})}}</i>
                                                    </mat-hint>
                                        </mat-form-field>

                                        <!-- Политика расчета средней себестоимости/Policy of netcost calculation -->
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.cost_politic')}}</mat-label>
                                            <mat-select  
                                                formControlName="st_netcost_policy"
                                                [disabled]=!editability                                             
                                                (selectionChange)="changeNetcostPolicyAttention()"
                                            >                          
                                                <mat-option 
                                                    value="all" 
                                                    matTooltip="{{t('docs.tip.cost_all')}}"
                                                >
                                                        {{t('docs.list.all_company')}}
                                                </mat-option>                     
                                                <mat-option 
                                                    value="each"
                                                    matTooltip="{{t('docs.tip.cost_each')}}"
                                                >
                                                        {{t('docs.list.each_deprt')}}
                                                </mat-option>                                                 
                                            </mat-select>
                                        </mat-form-field>
                                        <div class="flex">
                                            <!-- <mat-form-field 
                                                class="slideWidth100">
                                                <mat-slide-toggle 
                                                    style="height: 14px;"
                                                    formControlName="is_store">
                                                    {{t('docs.field.p_store')}}
                                                </mat-slide-toggle>
                                                <input matInput hidden/>
                                            </mat-form-field>
                                             -->
                                            <mat-form-field class="mat-form-field-100">
                                                <mat-label>{{t('docs.field.default_lang')}} <span *ngIf="formBaseInformation.get('store_default_lang_code').value.length != 2" class="star">*</span></mat-label>
                                                <input  matInput                                        
                                                        placeholder="EN,RU,FR,ES..."
                                                        maxlength="2"                                                        
                                                        (keypress)="lettersOnly($event)"
                                                        [readonly]=!editability
                                                        #store_default_lang_code
                                                        formControlName="store_default_lang_code"/>                               
                                                <mat-hint  align="start" *ngIf="formBaseInformation.get('store_default_lang_code').touched && formBaseInformation.get('store_default_lang_code').invalid">
                                                    <i class="form-invalid">{{t('docs.error.num_letters',{num:"2"})}}</i>
                                                </mat-hint>
                                            </mat-form-field>
                                        </div>
                                        <mat-form-field  class="mat-form-field-100">
                                            <mat-label>{{t('docs.field.bkng_doc_name_var')}}</mat-label>
                                            <mat-select  
                                                formControlName="booking_doc_name_variation_id"
                                                [disabled]=!editability
                                            >                          
                                                <mat-option 
                                                    [value]=1 
                                                >
                                                        {{t('docs.list.appointment')}}
                                                </mat-option>                     
                                                <mat-option 
                                                    [value]=2
                                                >
                                                        {{t('docs.list.reservation')}}
                                                </mat-option>                                                 
                                            </mat-select>
                                        </mat-form-field>
                                        
                                        <mat-form-field>
                                            <mat-label>{{t('docs.field.time_zone')}} <span *ngIf="formBaseInformation.get('timeZoneName').value==0||formBaseInformation.get('timeZoneName').value==null" class="star">*</span></mat-label>
                                            <input matInput
                                            type="text"
                                            formControlName="timeZoneName" 
                                            [matAutocomplete]="auto" 
                                            (input)="checkEmptyFields('time_zone_id','timeZoneName');"
                                            (change)="checkEmptyFields('time_zone_id','timeZoneName');">
                                            
                                            <mat-icon 
                                                matTooltip="{{t('docs.tip.clear_field')}}" 
                                                class="clear_field"
                                                (click)="clearField('timeZoneName');checkEmptyFields('time_zone_id','timeZoneName');" >
                                                close
                                            </mat-icon>
                                            <mat-autocomplete #auto="matAutocomplete">
                                            <mat-option *ngFor="let option of filteredSpravSysTimeZones | async" [value]="option.name">
                                                <div (click)="formBaseInformation.get('time_zone_id').setValue(option.id)">
                                                    <span style="margin:10px;">{{option.name}}</span>
                                                </div>
                                            </mat-option>
                                            </mat-autocomplete>
                                            <mat-hint  align="start" *ngIf="formBaseInformation.get('timeZoneName').touched && formBaseInformation.get('time_zone_id').invalid">
                                                <i class="form-invalid">{{t('docs.error.field_miss')}}</i>
                                            </mat-hint>
                                        </mat-form-field>

                                    </mat-card-content>
                                </mat-card>
                            </div>
                        </div>
                    </div>
                </mat-tab>
                <mat-tab  *ngIf="+id>0"  label="{{t('docs.tab.about')}}">
                    <div class="container-fluid">
                        <div class="row" style="padding: 10px">
                            <div class="col-xl-5 col-lg-9 col-md-12">
                                <form [formGroup]="formAboutDocument">
                                    <mat-card appearance="outlined">
                                        <mat-card-content class="input-form">
                    
                                            <mat-form-field [ngClass]="{invisible: +id==0}">
                                                <input  matInput
                                                        placeholder="{{t('docs.field.company')}}"
                                                        formControlName="company" [readonly]=true/>
                                            </mat-form-field>
                                            <mat-form-field [ngClass]="{invisible: +id==0}">
                                                <input  matInput
                                                        placeholder="{{t('docs.field.creator')}}"
                                                        formControlName="creator" [readonly]=true/>
                                            </mat-form-field>
                                            <mat-form-field [ngClass]="{invisible: +id==0}">
                                                <input  matInput
                                                        placeholder="{{t('docs.field.created')}}"
                                                        formControlName="date_time_created" [readonly]=true/>
                                            </mat-form-field>
                                            <mat-form-field [ngClass]="{invisible: +id==0}">
                                                <input  matInput
                                                        placeholder="{{t('docs.field.changer')}}"
                                                        formControlName="changer" [readonly]=true/>
                                            </mat-form-field>
                                            <mat-form-field [ngClass]="{invisible: +id==0}">
                                                <input  matInput
                                                        placeholder="{{t('docs.field.changed')}}"
                                                        formControlName="date_time_changed" [readonly]=true/>
                                            </mat-form-field>
                                        </mat-card-content>
                                    </mat-card>  
                                </form>  
                            </div>
                        </div>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </form>
    </mat-card-content> 
</mat-card>